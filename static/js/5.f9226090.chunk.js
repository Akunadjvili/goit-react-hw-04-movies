(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[5],{44:function(t,e,r){"use strict";r.d(e,"a",(function(){return u})),r.d(e,"b",(function(){return p})),r.d(e,"f",(function(){return l})),r.d(e,"c",(function(){return v})),r.d(e,"d",(function(){return b})),r.d(e,"e",(function(){return j}));var n=r(45),a=r.n(n),c=r(46),o=r(47),i=r.n(o);i.a.defaults.baseURL="https://api.themoviedb.org/".concat("3"),i.a.defaults.headers.common.Authorization="Bearer ".concat("eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiNWZkYWQ0ZjAwZmFmNWEwZTc3OTIzYjYxMWIyZDdmOSIsInN1YiI6IjYwNjA3MmI1MzlhMWE2MDA3NTVmNDJmYiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.BitU9jAy6ozOY21sloVzQqm0hM2h-9SJaeW-vmDViqY"),i.a.defaults.headers.common["Content-Type"]="application/json;charset=utf-8";var s="https://image.tmdb.org/t/p/w500";function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"avatar.jpg";return t?"".concat(s).concat(t):"/goit-react-hw-04-movies"+"/".concat(e)}function p(){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("/trending/movie/day");case 3:return e=t.sent,r=e.data.results,t.abrupt("return",r);case 8:throw t.prev=8,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function l(t){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("/search/movie?query=".concat(e));case 3:return r=t.sent,n=r.data.results,t.abrupt("return",n||[]);case 8:throw t.prev=8,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function v(t){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("/movie/".concat(e));case 3:return r=t.sent,n=r.data,t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function b(t){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("/movie/".concat(e,"/credits"));case 3:return r=t.sent,n=r.data.crew,t.abrupt("return",n||[]);case 8:throw t.prev=8,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function j(t){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(a.a.mark((function t(e){var r,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("/movie/".concat(e,"/reviews"));case 3:return r=t.sent,n=r.data.results,t.abrupt("return",n||[]);case 8:throw t.prev=8,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}},48:function(t,e,r){t.exports={MovieList:"MovieList_MovieList__hZJRQ",MovieList__item:"MovieList_MovieList__item__1UsSf",MovieList__image:"MovieList_MovieList__image__DYc7i",MovieList__title:"MovieList_MovieList__title__2qt9I"}},49:function(t,e,r){"use strict";r.d(e,"a",(function(){return b}));var n=r(7),a=r(8),c=r(10),o=r(9),i=r(0),s=r(11),u=r(2),p=r(48),h=r.n(p),l=r(44),f=r(12),v=r(1),m=function(t){Object(c.a)(r,t);var e=Object(o.a)(r);function r(){return Object(n.a)(this,r),e.apply(this,arguments)}return Object(a.a)(r,[{key:"render",value:function(){var t=this.props,e=t.movies,r=t.location;return Object(v.jsx)("ul",{className:h.a.MovieList,children:e.map((function(t){var e=t.id,n=t.title,a=t.poster_path;return Object(v.jsxs)("li",{className:h.a.MovieList__item,children:[Object(v.jsx)("img",{className:h.a.MovieList__image,src:Object(l.a)(a,"poster.jpg"),alt:n}),Object(v.jsx)(s.b,{className:h.a.MovieList__title,to:{pathname:"".concat(f.a.movies,"/").concat(e),state:{from:r}},children:n})]},e)}))})}}]),r}(i.Component);m.defaultProps={movies:[]};var b=Object(u.f)(m)},78:function(t,e,r){"use strict";var n=r(79),a=r(18);function c(t,e){return e.encode?e.strict?n(t):encodeURIComponent(t):t}function o(t){return Array.isArray(t)?t.sort():"object"===typeof t?o(Object.keys(t)).sort((function(t,e){return Number(t)-Number(e)})).map((function(e){return t[e]})):t}e.extract=function(t){return t.split("?")[1]||""},e.parse=function(t,e){var r=function(t){var e;switch(t.arrayFormat){case"index":return function(t,r,n){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=r):n[t]=r};case"bracket":return function(t,r,n){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],r):n[t]=[r]:n[t]=r};default:return function(t,e,r){void 0!==r[t]?r[t]=[].concat(r[t],e):r[t]=e}}}(e=a({arrayFormat:"none"},e)),n=Object.create(null);return"string"!==typeof t?n:(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach((function(t){var e=t.replace(/\+/g," ").split("="),a=e.shift(),c=e.length>0?e.join("="):void 0;c=void 0===c?null:decodeURIComponent(c),r(decodeURIComponent(a),c,n)})),Object.keys(n).sort().reduce((function(t,e){var r=n[e];return Boolean(r)&&"object"===typeof r&&!Array.isArray(r)?t[e]=o(r):t[e]=r,t}),Object.create(null))):n},e.stringify=function(t,e){var r=function(t){switch(t.arrayFormat){case"index":return function(e,r,n){return null===r?[c(e,t),"[",n,"]"].join(""):[c(e,t),"[",c(n,t),"]=",c(r,t)].join("")};case"bracket":return function(e,r){return null===r?c(e,t):[c(e,t),"[]=",c(r,t)].join("")};default:return function(e,r){return null===r?c(e,t):[c(e,t),"=",c(r,t)].join("")}}}(e=a({encode:!0,strict:!0,arrayFormat:"none"},e));return t?Object.keys(t).sort().map((function(n){var a=t[n];if(void 0===a)return"";if(null===a)return c(n,e);if(Array.isArray(a)){var o=[];return a.slice().forEach((function(t){void 0!==t&&o.push(r(n,t,o.length))})),o.join("&")}return c(n,e)+"="+c(a,e)})).filter((function(t){return t.length>0})).join("&"):""}},79:function(t,e,r){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}},80:function(t,e,r){t.exports={MoviesPage:"MoviesPage_MoviesPage__N71MF"}},81:function(t,e,r){t.exports={Searchbar:"Searchbar_Searchbar__1mC_n",SearchForm:"Searchbar_SearchForm__3W-RG","SearchForm-button":"Searchbar_SearchForm-button__3_Tf_","SearchForm-button-label":"Searchbar_SearchForm-button-label__3Xqkw","SearchForm-input":"Searchbar_SearchForm-input__3my7L"}},88:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return M}));var n=r(45),a=r.n(n),c=r(46),o=r(7),i=r(8),s=r(10),u=r(9),p=r(0),h=r(2),l=r(78),f=r.n(l),v=r(80),m=r.n(v),b=r(22);function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var j=r(81),y=r.n(j),_=r(1),g=function(t){Object(s.a)(r,t);var e=Object(u.a)(r);function r(){var t;Object(o.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).state={query:""},t.updateFields=function(e){var r=e.currentTarget,n=r.name,a=r.value;t.setState((function(t){return d({},n,a)}))},t.onSubmitHandler=function(e){var r=t.props.onSubmit,n=t.state.query;e.preventDefault(),r(n)},t}return Object(i.a)(r,[{key:"render",value:function(){var t=this.state.query;return Object(_.jsx)("header",{className:y.a.Searchbar,children:Object(_.jsxs)("form",{className:y.a.SearchForm,onSubmit:this.onSubmitHandler,children:[Object(_.jsx)("button",{type:"submit",className:y.a["SearchForm-button"],children:Object(_.jsx)("span",{className:y.a["SearchForm-button-label"],children:"Search"})}),Object(_.jsx)("input",{className:y.a["SearchForm-input"],type:"text",autoComplete:"off",autoFocus:!0,name:"query",value:t,onChange:this.updateFields,placeholder:"Search movies"})]})})}}]),r}(p.Component);g.defaultProps={onSubmit:function(){}};var O=g,x=r(49),S=r(44),w=function(t){Object(s.a)(r,t);var e=Object(u.a)(r);function r(){var t;Object(o.a)(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).state={movies:[],search:"",loading:!1},t.getSearchFromProps=function(t){return f.a.parse(t.location.search).search},t.fetchMoviesList=function(){var e=Object(c.a)(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r.trim()){e.next=2;break}return e.abrupt("return",t.setState({search:"",movies:[]}));case 2:return e.prev=2,t.setState({loading:!0}),e.t0=t,e.t1=r,e.next=8,Object(S.f)(r);case 8:e.t2=e.sent,e.t3={search:e.t1,movies:e.t2},e.t0.setState.call(e.t0,e.t3),e.next=16;break;case 13:e.prev=13,e.t4=e.catch(2),console.log(e.t4);case 16:return e.prev=16,t.setState({loading:!1}),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),t.onQueryChange=function(e){t.props.history.push({pathname:t.props.location.pathname,search:"search=".concat(e)}),t.setState({search:e})},t}return Object(i.a)(r,[{key:"componentDidUpdate",value:function(){var t=Object(c.a)(a.a.mark((function t(e,r){var n,c,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.search,c=this.getSearchFromProps(e),o=this.getSearchFromProps(this.props),c===o){t.next=8;break}return t.next=6,this.fetchMoviesList(o||"");case 6:t.next=11;break;case 8:if(n===this.state.search){t.next=11;break}return t.next=11,this.fetchMoviesList(this.state.search||" ");case 11:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=f.a.parse(this.props.location.search).search||"";this.setState({search:t})}},{key:"render",value:function(){var t=this.state,e=t.movies,r=t.loading;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:m.a.MoviesPage,children:[Object(_.jsx)(O,{onSubmit:this.onQueryChange}),e.length?Object(_.jsx)(x.a,{movies:e}):null]}),r&&Object(_.jsx)(b.a,{})]})}}]),r}(p.Component),M=Object(h.f)(w)}}]);
//# sourceMappingURL=5.f9226090.chunk.js.map